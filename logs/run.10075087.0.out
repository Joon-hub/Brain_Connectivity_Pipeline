===========================================
Starting Brain Connectivity Classification
===========================================
Current directory: /home/sjoon/projects/brain_connectivity_classifier
Running on host: cpu43
Start time: Thu Oct 30 10:37:34 PM CET 2025
===========================================

======================================================================
              BRAIN CONNECTIVITY CLASSIFICATION PIPELINE              
======================================================================

Mode: SAMPLE DATA (quick test)
Config: config.yaml
Start time: 2025-10-30 22:37:35

✓ Loaded configuration from config.yaml
✓ Random seeds set to 42

======================================================================
                  STEP 1/6: Load Resting-State Data                   
======================================================================
✓ Created sample with 10 subjects: data/sample/sample_piop2_small.csv
✓ Schema valid: 10 subjects, 26796 connections

======================================================================
            STEP 2/6: Extract Features and Create Dataset             
======================================================================
✓ Extracted 232 unique brain regions
✓ Extracted 232 unique brain regions
✓ Created dataset: 2320 samples (10 subjects × 232 regions)

======================================================================
               STEP 3/6: Train Brain Region Classifier                
======================================================================

============================================================
TRAINING BRAIN REGION CLASSIFIER
============================================================
Samples: 2320
Features: 232
Classes: 232
Subjects: 10

Running 5-fold cross-validation...
  Fold 1: 0.2953
  Fold 2: 0.2737
  Fold 3: 0.3534
  Fold 4: 0.3060
  Fold 5: 0.3922

CV Results: 0.3241 ± 0.0429

Training final model on full dataset...
Training accuracy: 0.7720
============================================================

✓ Model saved: data/processed/trained_model.pkl

======================================================================
               STEP 4/6: Apply Classifier to Task Data                
======================================================================
✓ Created sample with 10 subjects: data/sample/sample_piop1_small.csv
✓ Schema valid: 10 subjects, 26796 connections
✓ Schema valid: 10 subjects, 26796 connections
✓ Extracted 232 unique brain regions
✓ Created dataset: 2320 samples (10 subjects × 232 regions)

======================================================================
             STEP 5/6: Generate Error Maps and Statistics             
======================================================================
✓ Saved: reports/tables/basic_analysis/error_map_rest.csv
✓ Saved: reports/tables/confusion_matrix/train_raw.csv
✓ Saved: reports/tables/confusion_matrix/train_normalized.csv
✓ Confusion matrices saved for train set (raw & normalized)
✓ Saved: reports/tables/confusion_matrix/task_raw.csv
✓ Saved: reports/tables/confusion_matrix/task_normalized.csv
✓ Confusion matrices saved for task set (raw & normalized)
⚠ Skipping network-level aggregation (user-defined advanced analysis).
✓ Saved: reports/tables/basic_analysis/comparison_rest_vs_task.csv

✓ Generated CSV outputs in reports/tables/basic_analysis

======================================================================
                  STEP 6/6: Generate Thesis Figures                   
======================================================================
✓ Saved figure: reports/figures/basic_analysis/fig1_error_map_rest.png
⚠ Skipping network-level visualization (user-defined advanced analysis).
✓ Saved figure: reports/figures/basic_analysis/fig3_error_map_task.png
✓ Saved figure: reports/figures/basic_analysis/fig4_rest_vs_task_comparison.png

✓ Generated 4 thesis figures in reports/figures/basic_analysis

======================================================================
                          PIPELINE COMPLETE!                          
======================================================================

Summary of Results:
==================

Training Data:
  Subjects: 10
  Regions: 232
  Samples: 2320

Model Performance:
  CV Accuracy: 0.3241 ± 0.0429
  Train Accuracy: 0.7720
  Random Baseline: 0.0043 (232 classes)
  Improvement: 75.2x better than chance

Task Data:
  Subjects: 10
  Samples: 2320


Output Files:
  Model: data/processed/trained_model.pkl
  Tables: reports/tables/basic_analysis/
  Figures: reports/figures/basic_analysis/

Execution Time: 36s
Completed: 2025-10-30 22:38:12

✓ Provenance logged to reports/tables/basic_analysis/provenance.yaml
✅ All done! Results are ready for your thesis.


===========================================
Pipeline finished!
End time: Thu Oct 30 10:38:12 PM CET 2025
Exit code: 0
===========================================
